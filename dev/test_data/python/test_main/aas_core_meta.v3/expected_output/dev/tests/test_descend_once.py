"""Test :py:method:`aas_core3.types.Class.descend_once`."""


# This code has been automatically generated by aas-core-codegen.
# Do NOT edit or append.


# pylint: disable=missing-docstring


import unittest


import tests.common
import tests.common_xmlization


class TestWithExpectedMaximal(unittest.TestCase):
    def test_descend_once_against_recorded_trace_log(self) -> None:
        xml_expected_dir = tests.common.TEST_DATA_DIR / "Xml" / "Expected"

        for path in sorted(xml_expected_dir.glob("**/maximal.xml")):
            instance = tests.common_xmlization.must_load(path)

            rel_path = path.relative_to(xml_expected_dir)

            expected_path = (
                tests.common.TEST_DATA_DIR
                / "descend_once"
                / rel_path.parent
                / f"{rel_path.name}.trace"
            )

            log = [
                tests.common.trace(something)
                for something in instance.descend_once()
            ]

            got_text = tests.common.trace_log_as_text_file_content(log)

            tests.common.record_or_check(expected_path, got_text)


if __name__ == "__main__":
    unittest.main()


# This code has been automatically generated by aas-core-codegen.
# Do NOT edit or append.
