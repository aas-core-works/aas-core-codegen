"""Test JSON de/serialization of classes with descendants."""


# This code has been automatically generated by aas-core-codegen.
# Do NOT edit or append.


# pylint: disable=missing-docstring


import json
import unittest


import aas_core3.jsonization as aas_jsonization


import tests.common_jsonization


class TestRoundTrips(unittest.TestCase):
    def test_referable(self) -> None:
        for descendant_model_type in [
            'AnnotatedRelationshipElement',
            'AssetAdministrationShell',
            'BasicEventElement',
            'Blob',
            'Capability',
            'ConceptDescription',
            'Entity',
            'File',
            'MultiLanguageProperty',
            'Operation',
            'Property',
            'Range',
            'ReferenceElement',
            'RelationshipElement',
            'Submodel',
            'SubmodelElementCollection',
            'SubmodelElementList'
        ]:
            for path in sorted(
                (
                    tests.common.TEST_DATA_DIR
                    / "Json"
                    / "Expected"
                    / descendant_model_type
                ).glob("**/*.json")
            ):
                with path.open("rt") as fid:
                    original_jsonable = json.load(fid)

                instance = aas_jsonization.referable_from_jsonable(
                    original_jsonable
                )

                another_jsonable = aas_jsonization.to_jsonable(instance)

                mismatch = tests.common_jsonization.check_equal(
                    original_jsonable,
                    another_jsonable
                )

                self.assertListEqual([], list(map(str, mismatch)))

    def test_identifiable(self) -> None:
        for descendant_model_type in [
            'AssetAdministrationShell',
            'ConceptDescription',
            'Submodel'
        ]:
            for path in sorted(
                (
                    tests.common.TEST_DATA_DIR
                    / "Json"
                    / "Expected"
                    / descendant_model_type
                ).glob("**/*.json")
            ):
                with path.open("rt") as fid:
                    original_jsonable = json.load(fid)

                instance = aas_jsonization.identifiable_from_jsonable(
                    original_jsonable
                )

                another_jsonable = aas_jsonization.to_jsonable(instance)

                mismatch = tests.common_jsonization.check_equal(
                    original_jsonable,
                    another_jsonable
                )

                self.assertListEqual([], list(map(str, mismatch)))

    def test_qualifiable(self) -> None:
        for descendant_model_type in [
            'AnnotatedRelationshipElement',
            'BasicEventElement',
            'Blob',
            'Capability',
            'Entity',
            'File',
            'MultiLanguageProperty',
            'Operation',
            'Property',
            'Range',
            'ReferenceElement',
            'RelationshipElement',
            'Submodel',
            'SubmodelElementCollection',
            'SubmodelElementList'
        ]:
            for path in sorted(
                (
                    tests.common.TEST_DATA_DIR
                    / "Json"
                    / "Expected"
                    / descendant_model_type
                ).glob("**/*.json")
            ):
                with path.open("rt") as fid:
                    original_jsonable = json.load(fid)

                instance = aas_jsonization.qualifiable_from_jsonable(
                    original_jsonable
                )

                another_jsonable = aas_jsonization.to_jsonable(instance)

                mismatch = tests.common_jsonization.check_equal(
                    original_jsonable,
                    another_jsonable
                )

                self.assertListEqual([], list(map(str, mismatch)))

    def test_submodel_element(self) -> None:
        for descendant_model_type in [
            'AnnotatedRelationshipElement',
            'BasicEventElement',
            'Blob',
            'Capability',
            'Entity',
            'File',
            'MultiLanguageProperty',
            'Operation',
            'Property',
            'Range',
            'ReferenceElement',
            'RelationshipElement',
            'SubmodelElementCollection',
            'SubmodelElementList'
        ]:
            for path in sorted(
                (
                    tests.common.TEST_DATA_DIR
                    / "Json"
                    / "Expected"
                    / descendant_model_type
                ).glob("**/*.json")
            ):
                with path.open("rt") as fid:
                    original_jsonable = json.load(fid)

                instance = aas_jsonization.submodel_element_from_jsonable(
                    original_jsonable
                )

                another_jsonable = aas_jsonization.to_jsonable(instance)

                mismatch = tests.common_jsonization.check_equal(
                    original_jsonable,
                    another_jsonable
                )

                self.assertListEqual([], list(map(str, mismatch)))

    def test_relationship_element(self) -> None:
        for descendant_model_type in [
            'AnnotatedRelationshipElement'
        ]:
            for path in sorted(
                (
                    tests.common.TEST_DATA_DIR
                    / "Json"
                    / "Expected"
                    / descendant_model_type
                ).glob("**/*.json")
            ):
                with path.open("rt") as fid:
                    original_jsonable = json.load(fid)

                instance = aas_jsonization.relationship_element_from_jsonable(
                    original_jsonable
                )

                another_jsonable = aas_jsonization.to_jsonable(instance)

                mismatch = tests.common_jsonization.check_equal(
                    original_jsonable,
                    another_jsonable
                )

                self.assertListEqual([], list(map(str, mismatch)))

    def test_data_element(self) -> None:
        for descendant_model_type in [
            'Blob',
            'File',
            'MultiLanguageProperty',
            'Property',
            'Range',
            'ReferenceElement'
        ]:
            for path in sorted(
                (
                    tests.common.TEST_DATA_DIR
                    / "Json"
                    / "Expected"
                    / descendant_model_type
                ).glob("**/*.json")
            ):
                with path.open("rt") as fid:
                    original_jsonable = json.load(fid)

                instance = aas_jsonization.data_element_from_jsonable(
                    original_jsonable
                )

                another_jsonable = aas_jsonization.to_jsonable(instance)

                mismatch = tests.common_jsonization.check_equal(
                    original_jsonable,
                    another_jsonable
                )

                self.assertListEqual([], list(map(str, mismatch)))

    def test_event_element(self) -> None:
        for descendant_model_type in [
            'BasicEventElement'
        ]:
            for path in sorted(
                (
                    tests.common.TEST_DATA_DIR
                    / "Json"
                    / "Expected"
                    / descendant_model_type
                ).glob("**/*.json")
            ):
                with path.open("rt") as fid:
                    original_jsonable = json.load(fid)

                instance = aas_jsonization.event_element_from_jsonable(
                    original_jsonable
                )

                another_jsonable = aas_jsonization.to_jsonable(instance)

                mismatch = tests.common_jsonization.check_equal(
                    original_jsonable,
                    another_jsonable
                )

                self.assertListEqual([], list(map(str, mismatch)))

    def test_data_specification_content(self) -> None:
        for descendant_model_type in [
            'DataSpecificationIec61360'
        ]:
            for path in sorted(
                (
                    tests.common.TEST_DATA_DIR
                    / "Json"
                    / "Expected"
                    / descendant_model_type
                ).glob("**/*.json")
            ):
                with path.open("rt") as fid:
                    original_jsonable = json.load(fid)

                instance = aas_jsonization.data_specification_content_from_jsonable(
                    original_jsonable
                )

                another_jsonable = aas_jsonization.to_jsonable(instance)

                mismatch = tests.common_jsonization.check_equal(
                    original_jsonable,
                    another_jsonable
                )

                self.assertListEqual([], list(map(str, mismatch)))


if __name__ == "__main__":
    unittest.main()


# This code has been automatically generated by aas-core-codegen.
# Do NOT edit or append.
